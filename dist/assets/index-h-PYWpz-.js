import{_ as R,a as A,b as G}from"./worker.services-C9vxp5II.js";import{d as P,e as p,r as n,o as w,c as k,w as a,a as t,u as r,g as x,f as q,h as C,i as U,t as H}from"./index-CqlVs-0d.js";import{c as W}from"./office.services-CqMnrejG.js";import{c as z}from"./position.services-LdXWdsXF.js";import{r as g}from"./ruleUtils-DaB-ACZt.js";import{_ as J}from"./DialogConfirm.vue_vue_type_script_setup_true_lang-C_UyCIvg.js";const V={documentType:[g],documentNumber:[g],name:[g],paternalLastName:[g],maternalLastName:[g],birthDate:[],gender:[g],phoneNumber:[g],email:[],status:[g],positionId:[],officeId:[],description:[]},K=()=>({id:null,documentType:"DNI",documentNumber:"",name:"",paternalLastName:"",maternalLastName:"",birthDate:null,gender:"M",phoneNumber:"",email:null,status:!0,positionId:null,officeId:null}),B=P({__name:"Form",props:{formState:{type:Object,default:()=>({})}},emits:["onSuccess"],setup(L,{emit:f}){const d=f,i=L,s=p(!1),m=p(!1),l=p({...K(),...i.formState}),y=p([]),_=p([]),v=async()=>{s.value=!0,await R(l.value)&&(d("onSuccess"),m.value=!1),s.value=!1};return(async()=>{console.log("init"),y.value=await W(),_.value=await z()})(),(b,e)=>{const N=n("v-select"),u=n("v-col"),c=n("v-text-field"),T=n("v-switch"),I=n("v-row"),S=n("v-card-item"),$=n("v-btn"),O=n("v-spacer"),E=n("v-card-actions"),j=n("v-card"),F=n("v-form"),M=n("v-dialog");return w(),k(M,{"max-width":"700",modelValue:m.value,"onUpdate:modelValue":e[13]||(e[13]=o=>m.value=o),activator:"parent"},{default:a(()=>[t(F,{ref:"formRef",onSubmit:q(v,["prevent"])},{default:a(()=>[t(j,{title:l.value.id?"Editar Registro":"Nuevo Registro"},{default:a(()=>[t(S,{class:"border-t border-b"},{default:a(()=>[t(I,null,{default:a(()=>[t(u,{cols:"12",md:"6"},{default:a(()=>[t(N,{modelValue:l.value.documentType,"onUpdate:modelValue":e[0]||(e[0]=o=>l.value.documentType=o),items:["DNI"],label:"Tipo de documento",rules:r(V).documentType},null,8,["modelValue","rules"])]),_:1}),t(u,{cols:"12",md:"6"},{default:a(()=>[t(c,{modelValue:l.value.documentNumber,"onUpdate:modelValue":e[1]||(e[1]=o=>l.value.documentNumber=o),label:"Número de documento",rules:r(V).documentNumber},null,8,["modelValue","rules"])]),_:1}),t(u,{cols:"12"},{default:a(()=>[t(c,{modelValue:l.value.name,"onUpdate:modelValue":e[2]||(e[2]=o=>l.value.name=o),label:"Nombre",rules:r(V).name},null,8,["modelValue","rules"])]),_:1}),t(u,{cols:"12"},{default:a(()=>[t(c,{modelValue:l.value.paternalLastName,"onUpdate:modelValue":e[3]||(e[3]=o=>l.value.paternalLastName=o),label:"Apellido paterno",rules:r(V).paternalLastName},null,8,["modelValue","rules"])]),_:1}),t(u,{cols:"12"},{default:a(()=>[t(c,{modelValue:l.value.maternalLastName,"onUpdate:modelValue":e[4]||(e[4]=o=>l.value.maternalLastName=o),label:"Apellido materno",rules:r(V).maternalLastName},null,8,["modelValue","rules"])]),_:1}),t(u,{cols:"12"},{default:a(()=>[t(c,{modelValue:l.value.email,"onUpdate:modelValue":e[5]||(e[5]=o=>l.value.email=o),label:"Correo electrónico",rules:r(V).email},null,8,["modelValue","rules"])]),_:1}),t(u,{cols:"12"},{default:a(()=>[t(c,{modelValue:l.value.phoneNumber,"onUpdate:modelValue":e[6]||(e[6]=o=>l.value.phoneNumber=o),label:"Número de teléfono",rules:r(V).phoneNumber},null,8,["modelValue","rules"])]),_:1}),t(u,{cols:"12"},{default:a(()=>[t(c,{modelValue:l.value.birthDate,"onUpdate:modelValue":e[7]||(e[7]=o=>l.value.birthDate=o),label:"Fecha de nacimiento",type:"date",rules:r(V).birthDate},null,8,["modelValue","rules"])]),_:1}),t(u,{cols:"12"},{default:a(()=>[t(N,{modelValue:l.value.gender,"onUpdate:modelValue":e[8]||(e[8]=o=>l.value.gender=o),items:[{title:"Masculino",value:"M"},{title:"Femenino",value:"F"}],label:"Género"},null,8,["modelValue"])]),_:1}),t(u,{cols:"12"},{default:a(()=>[t(N,{modelValue:l.value.positionId,"onUpdate:modelValue":e[9]||(e[9]=o=>l.value.positionId=o),items:_.value,label:"Cargo","item-title":"title","item-value":"value"},null,8,["modelValue","items"])]),_:1}),t(u,{cols:"12"},{default:a(()=>[t(N,{modelValue:l.value.officeId,"onUpdate:modelValue":e[10]||(e[10]=o=>l.value.officeId=o),items:y.value,label:"Oficina","item-title":"title","item-value":"value"},null,8,["modelValue","items"])]),_:1}),t(u,{cols:"12"},{default:a(()=>[t(T,{label:l.value.status?"Habilitado":"Deshabilitado",modelValue:l.value.status,"onUpdate:modelValue":e[11]||(e[11]=o=>l.value.status=o),color:"blue-darken-4",inset:""},null,8,["label","modelValue"])]),_:1})]),_:1})]),_:1}),t(E,null,{default:a(()=>[t($,{type:"button",variant:"text",color:"secondary",onClick:e[12]||(e[12]=o=>m.value=!1)},{default:a(()=>e[14]||(e[14]=[x(" Cancelar ")])),_:1}),t(O),t($,{text:"Guardar",color:"primary",type:"submit",loading:s.value},null,8,["loading"])]),_:1})]),_:1},8,["title"])]),_:1},512)]),_:1},8,["modelValue"])}}}),Q=[{title:"Op.",key:"actions",value:"actions",fixed:!0,width:"50px",sortable:!1},{title:"Documento",key:"documentNumber",value:"documentNumber"},{title:"Nombre",key:"name",value:"name"},{title:"Apellido Paterno",key:"paternalLastName",value:"paternalLastName"},{title:"Apellido Materno",key:"maternalLastName",value:"maternalLastName"},{title:"Fecha de Nacimiento",key:"birthDate",value:"birthDate"},{title:"Género",key:"gender",value:"gender"},{title:"Estado",key:"status",value:"status"}],X=P({__name:"DataTable",props:{options:{},items:{},loading:{type:Boolean},total:{}},emits:["onUpdateTable"],setup(L,{emit:f}){const d=f;return(i,s)=>{const m=n("v-icon"),l=n("v-list-item"),y=n("v-list"),_=n("v-menu"),v=n("v-btn"),D=n("v-data-table-server"),b=C("permission");return w(),k(D,{"items-per-page":i.options.itemsPerPage,"onUpdate:itemsPerPage":[s[1]||(s[1]=e=>i.options.itemsPerPage=e),s[4]||(s[4]=e=>d("onUpdateTable"))],"sort-by":i.options.sortBy,"onUpdate:sortBy":[s[2]||(s[2]=e=>i.options.sortBy=e),s[5]||(s[5]=e=>d("onUpdateTable"))],page:i.options.page,"onUpdate:page":[s[3]||(s[3]=e=>i.options.page=e),s[6]||(s[6]=e=>d("onUpdateTable"))],headers:r(Q),items:i.items,"items-length":i.total,loading:i.loading,"item-value":"id","multi-sort":""},{"item.actions":a(({item:e})=>[U((w(),k(v,{icon:"",density:"compact",variant:"text"},{default:a(()=>[t(m,null,{default:a(()=>s[7]||(s[7]=[x("mdi-dots-vertical")])),_:1}),t(_,{activator:"parent"},{default:a(()=>[t(y,{density:"compact"},{default:a(()=>[U((w(),k(l,{key:"edit",value:"edit",title:"Editar","append-icon":"mdi-pencil"},{default:a(()=>[t(r(B),{formState:e,onOnSuccess:s[0]||(s[0]=N=>d("onUpdateTable"))},null,8,["formState"])]),_:2},1024)),[[b,["workers.edit"]]]),U((w(),k(l,{key:"delete",value:"delete",title:"Eliminar",class:"text-red","append-icon":"mdi-delete"},{default:a(()=>[t(J,{title:"Eliminar",message:"¿Está seguro de eliminar este registro?",onOnConfirm:async()=>{await r(A)(e.id)&&d("onUpdateTable")}},null,8,["onOnConfirm"])]),_:2},1024)),[[b,["workers.delete"]]])]),_:2},1024)]),_:2},1024)]),_:2},1024)),[[b,["workers.edit","workers.delete"]]])]),"item.status":a(({item:e})=>[t(v,{color:e.status?"blue":"error","text-color":"white",density:"compact",variant:"tonal"},{default:a(()=>[x(H(e.status?"Habilitado":"Deshabilitado"),1)]),_:2},1032,["color"])]),_:1},8,["items-per-page","sort-by","page","headers","items","items-length","loading"])}}}),ae=P({__name:"index",setup(L){const f=p(!1),d=p(!1),i=p([]),s=p(0),m=p({itemsPerPage:10,sortBy:[],page:1,search:"",filters:{}}),l=async()=>{d.value=!0;const _=await G(m.value);i.value=_.data,s.value=_.total,d.value=!1},y=async()=>{f.value=!0,await l(),f.value=!1};return y(),(_,v)=>{const D=n("v-text-field"),b=n("v-col"),e=n("v-btn"),N=n("v-row"),u=n("v-card-item"),c=n("v-card"),T=C("permission"),I=C("tooltip");return w(),k(c,{title:"Trabajadores",subtitle:"Gestión de trabajadores",disabled:f.value},{default:a(()=>[t(u,{class:"border-t border-b"},{default:a(()=>[t(N,{class:"d-flex justify-space-between"},{default:a(()=>[t(b,{cols:"12",md:"4"},{default:a(()=>[t(D,{modelValue:m.value.search,"onUpdate:modelValue":v[0]||(v[0]=S=>m.value.search=S),label:"Buscar",clearable:"",onInput:l},null,8,["modelValue"])]),_:1}),t(b,{cols:"12",md:"4",class:"d-md-flex d-block justify-end text-end"},{default:a(()=>[U((w(),k(e,{class:"h-md-auto me-2",disabled:f.value},{default:a(()=>[v[1]||(v[1]=x(" nuevo ")),t(r(B),{onOnSuccess:l})]),_:1},8,["disabled"])),[[T,["workers.create"]]]),U(t(e,{class:"h-md-auto",density:"comfortable",icon:"mdi-reload",onClick:y,loading:d.value},null,8,["loading"]),[[I,"Recargar registros"],[T,["workers.index"]]])]),_:1})]),_:1})]),_:1}),U(t(r(X),{options:m.value,loading:d.value,items:i.value,total:s.value,onOnUpdateTable:l},null,8,["options","loading","items","total"]),[[T,["workers.index"]]])]),_:1},8,["disabled"])}}});export{ae as default};
